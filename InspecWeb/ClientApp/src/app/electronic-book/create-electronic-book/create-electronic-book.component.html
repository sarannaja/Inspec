<div class="header">
  <h1 class="header-title">
    ระบบตรวจราชการอิเล็กทรอนิกส์
  </h1>
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="javascript:void(0)">หน้าหลัก</a></li>
      <li class="breadcrumb-item"><a href="javascript:void(0)" (click)="goBack()">สมุดตรวจอิเล็กทรอนิกส์</a></li>
      <li class="breadcrumb-item active" aria-current="page">สร้างสมุดตรวจอิเล็กทรอนิกส์</li>
    </ol>
  </nav>
</div>
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header" style="margin-bottom: -40px;">
        <h5 class="card-title">สร้างสมุดตรวจอิเล็กทรอนิกส์</h5>
      </div>

      <div class="card-body" style="margin-top: 45px;">
        <form [formGroup]="EbookForm" (ngSubmit)="storeElectronicBook(EbookForm.value)">
          <div>
            <div class="col-12 col-xl-12">
              <div class="form-group">
                <div class="form-group">
                  <label class="form-label">แผนการตรวจราชการประจำปี</label>
                  <ng-select bindLabel="label" bindValue="value" placeholder="กรุณาเลือกแผนการตรวจราชการประจำปี" [multiple]="true"
                      [items]="centralPolicyEbook" name="centralPolicyEventId" formControlName="centralPolicyEventId"
                     >
                  </ng-select>
                </div>
              </div>
            </div>
            <div class="col-12 col-xl-12">
              <label>กำหนดระยะเวลา</label>
            </div>
            <!-- <div class="col-12">
              <div class=" row">
                <form class=" row col-12">
                  <div class="col-12 col-xl-3">
                    <div class="form-group">
                      <my-date-picker-th formControlName="startDate"   [items]="myDatePickerOptions" required [(ngModel)]="startDate">
                      </my-date-picker-th>
                    </div>
                  </div>
                  <div class="col-12 col-xl-1">
                    <div class="" align="center">
                      ถึง
                    </div>
                  </div>
                  <div class="col-12 col-xl-3">
                    <div class="form-group">
                      <my-date-picker-th formControlName="endDate"   [items]="myDatePickerOptions" required [(ngModel)]="endDate">
                      </my-date-picker-th>
                    </div>
                  </div>

                </form>
              </div>
            </div> -->

            <div class="col-12">
              <div class="form-group row" *ngFor="let item of d.controls; let i = index">
                <form class="form-group row col-12" [formGroup]="item">
                  <div class="col-12 col-xl-3">
                    <div class="form-group">
                      <!-- <my-date-picker-th formControlName="start_date"   [items]="myDatePickerOptions" required>
                      </my-date-picker-th> -->
                      <my-date-picker-th formControlName="start_date" [(ngModel)]="item.start_date"
                          [options]="myDatePickerOptions" required>
                      </my-date-picker-th>
                    </div>
                  </div>
                  <div class="col-12 col-xl-1">
                    <div class="form-group" align="center">
                      ถึง
                    </div>
                  </div>
                  <div class="col-12 col-xl-3">
                    <div class="form-group">
                      <!-- <my-date-picker-th formControlName="end_date"   [items]="myDatePickerOptions" required>
                      </my-date-picker-th> -->
                      <my-date-picker-th formControlName="end_date" [(ngModel)]="item.end_date"
                          [options]="myDatePickerOptions" required>
                      </my-date-picker-th>
                    </div>
                  </div>
                </form>
              </div>
            </div>

            <div class="col-12 col-xl-12">
              <div class="form-group">
                <label>ผลการตรวจ</label>
                <textarea cols="30" rows="5" formControlName="checkDetail" class="form-control"
                  placeholder="กรุณากรอกผลการตรวจ">
                </textarea>
              </div>
            </div>

            <div class="col-12 col-xl-12">
              <div class="form-group">
                <label>ปัญหาและอุปสรรค</label>
                <textarea cols="30" rows="5" formControlName="Problem" class="form-control"
                  placeholder="กรุณากรอกปัญหาและอุปสรรค">
                </textarea>
              </div>
            </div>

            <div class="col-12 col-xl-12">
              <div class="form-group">
                <label>ข้อเสนอแนะ</label>
                <textarea cols="30" rows="5" formControlName="Suggestion" class="form-control"
                  placeholder="กรุณากรอกข้อเสนอแนะ">
                </textarea>
              </div>
            </div>

            <!-- <div class="col-12 col-xl-12" style="margin-top: 20px;">
              <div class="form-group">
                <div class="form-group col-md-3">
                  <div class="mb-3">
                    <input type="radio" name="Status" value="ร่างกำหนดการ" checked formControlName="Status">
                    <label style="margin-left: 10px;">ร่างกำหนดการ</label>
                    <input style="margin-left: 10px;" type="radio" name="Status" value="ใช้งานจริง"
                      formControlName="Status">
                    <label style="margin-left: 10px;">ใช้งานจริง</label>
                  </div>
                </div>
              </div>
            </div> -->

            <div class="col-12">
              <label class="form-label w-100" style="margin-top: 30px;">แนบไฟล์สมุดตรวจอิเล็กทรอนิกส์</label>
              <input type="file" multiple (change)="uploadFile($event)" style="margin-bottom: 10px;">
              <div class="col-4">
                <select class="selectpicker form-control" data-live-search="true"
                  (change)="checkType($event.target.value)" formControlName="fileType">
                  <option value="เลือกประเภทเอกสารแนบ" selected>เลือกประเภทเอกสารแนบ</option>
                  <option value="ElectronicBook Image File">รูปภาพ</option>
                  <option value="ElectronicBook File">ไฟล์เอกสาร</option>
                </select>
              </div>
              <div class="col-8">
                <textarea *ngIf="fileType == 'ElectronicBook Image File'" cols="30" rows="5" class="form-control"
                  placeholder="กรุณาใส่คำอธิบายรูปภาพ" style="margin-top: 10px;"
                  formControlName="description"></textarea>
              </div>
            </div>

            <div class="form-group col col-lg-12" style="margin-top: 20px; text-align: center;">
              <button style="align-self: center;" type="submit" class="btn btn-primary"
                style="margin-right: 45px;">บันทึก</button>
              <!-- <button style="align-self: center;" type="submit" class="btn btn-danger">ยกเลิก</button> -->
              <button type="submit" class="btn btn-danger" (click)="back()">ยกเลิก</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-spin-clockwise">
  <p style="font-size: 20px; color: white">Loading...</p>
</ngx-spinner>
