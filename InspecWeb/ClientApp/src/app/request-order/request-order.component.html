<div class="header">
  
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a [routerLink]="['/Main']">หน้าหลัก</a></li>
      <li class="breadcrumb-item active">แจ้งข้อมูลถึงผู้ตรวจราชการ</li>
    </ol>
  </nav>
</div>
<div class="row">
  <div class="col-12">
    <div class="card card-eiei">
      <div class="card-header" style="margin-bottom: -20px;">
        <h5 class="card-title">แจ้งข้อมูลถึงผู้ตรวจราชการ</h5>
        <div class="float-right" *ngIf="role_id == 4 || role_id == 5 || role_id == 9">
          <button class="btn btn-pill btn-warning btn-lg" title="เพิ่มข้อมูล" (click)="openModal(CreateRequestOrder)"
              style="margin-top: -60px;"><i class="align-middle fas fa-fw fa-plus"></i>
          </button>
        </div>
      </div>
      <div class="card-body">
        <table *ngIf="loading" class="table table-striped table-hover table-responsive-lg" datatable [dtOptions]="dtOptions">
          <thead>
            <tr>
              <th>#</th>
              <th>วันที่มีคำร้องขอ</th>
              <th>ประเด็น/เรื่อง</th>
              <th>ผู้รับคำร้องขอ</th>
              <th>สถานะ</th>
              <th *ngIf="role_id != 1"> <i class="align-middle mr-2 fas fa-fw fa-cog"></i> </th>
              <th></th>
            </tr>
          </thead>
          <tbody>         
              <tr *ngFor="let item of resultrequestorder; let i = index; let first = first;">
             
              <td>{{ i + 1 }}</td>
              <td>{{ item.commanded_date | thaidate: 'short' }}</td>
              <td class="pointer" style="color:#3b7ddd;" (click)="DetailRequestOrdermodal(DetailRequestorder,item.id)"> 
                <i class="align-middle mr-2 fas fa-fw fa-book"></i> <span>{{item.subject}}</span>
              </td>
              
              <td>
                <div *ngFor="let item2 of item.requestOrderAnswers;let m = index;">

                  <div *ngIf="item2.userID == userid && role_id == 3;">
                    {{item2.user.prefix}} {{item2.user.name}}                   
                  </div>

                  <div *ngIf="role_id == 1 || role_id == 4 || role_id == 5 || role_id == 9">
                    {{item2.user.prefix}} {{item2.user.name}}                  
                  </div>

                  <hr *ngIf="item.requestOrderAnswers.length != (m+1) && role_id !=3"> <!-- เส้นขั้น -->
                </div>

              </td> 
              <td>

                <div *ngFor="let item2 of item.requestOrderAnswers;let m = index;">

                  <div *ngIf="item2.userID == userid && role_id == 3;">
                    <div *ngIf="item.cancel == 1 ; else notcancel">
                      <label class="badge badge-danger mr-1">ยกเลิก</label>
                    </div>
                    <ng-template #notcancel>
                      <label *ngIf="item.draft === 1;else nodraft" class="badge badge-secondary mr-1">ฉบับร่าง</label>
                      <ng-template #nodraft>
                       
                        <label class="badge badge-success mr-1">{{item2.status}}</label>
                      </ng-template>

                      <!-- <span *ngIf="item.draft === 1;else nodraft">ฉบับร่าง</span>
                        <ng-template #nodraft>
                          <label class="badge badge-success mr-1">{{item2.status}}</label>
                        </ng-template>   -->

                    </ng-template>

                    <hr *ngIf="item.requestOrderAnswers.length != (m+1) && role_id !=3"> <!-- เส้นขั้น -->
                  </div>

                  <div *ngIf="role_id == 1 || role_id == 4 || role_id == 5 || role_id == 9">
                    <div *ngIf="item.cancel == 1 ; else notcancel">
                      <label class="badge badge-danger mr-1">ยกเลิก</label>
                    </div>
                    <ng-template #notcancel>
                      <label *ngIf="item.draft === 1;else nodraft" class="badge badge-secondary mr-1">ฉบับร่าง</label>
                      <ng-template #nodraft>
                     
                        <label class="badge badge-success mr-1">{{item2.status}}</label>
                      </ng-template>    
                      <!-- <span *ngIf="item.draft === 1;else nodraft">ฉบับร่าง</span>
                        <ng-template #nodraft>
                          <label class="badge badge-success mr-1">{{item2.status}}</label>
                        </ng-template>                    -->
                    </ng-template>

                    <hr *ngIf="item.requestOrderAnswers.length != (m+1) && role_id !=3"> <!-- เส้นขั้น --> 
                  </div>

                </div>
              </td>           
              <td *ngIf="role_id != 1"> 
                   
                <!-- สำหรับผู้สร้างคำร้องขอ -->
                <div *ngIf="(role_id == 4 || role_id == 5 || role_id == 9) && item.cancel == 0 && item.accept == 0">
                  <button type="button" class="btn btn-warning btn-pill btn-sm" 
                    (click)="editmodalRequestOrder(editRequestOrder, item.id,item.commanded_date,item.subject,item.subjectdetail
                    ,item.draft,item.requestOrderAnswers,item.requestOrderFiles)" title="แก้ไขคำร้องขอ">
                    <i class="align-middle fas fa-fw fa-sm fa-pen"></i>
                  </button>&nbsp;&nbsp;&nbsp;
                   
                  <button *ngIf="item.accept == 0 && item.draft == 0" type="button" class="btn btn-danger btn-pill btn-sm"
                  (click)="cancelmodal(cancel,item.id)" title="ยกเลิกคำร้องขอ">
                    <i class="align-middle fas fa-fw fa-sm fa-times"></i>
                  </button>  

                  <button *ngIf="item.accept == 0 && item.draft == 1" class="btn btn-danger btn-pill btn-sm" title="ลบข้อมูล"
                  (click)="openModal(modaldelete, item.id,item.commanded_date,item.subject,item.subjectdetail
                  ,item.draft,item.requestOrderAnswers,item.requestOrderFiles)">
                  <i class="align-middle fas fa-fw fa-trash-alt"></i>
                  </button>

                </div> 
                <!-- END สำหรับผู้สร้างคำร้องขอ -->

                <!-- สำหรับผู้รับคำร้องขอ -->
                <div *ngIf="role_id == 3 && item.cancel == 0 ">
                   
                  <div *ngFor="let item2 of item.requestOrderAnswers;let m = index;">
                    <div *ngIf="item2.userID == userid">

                      <button *ngIf="item2.beaware_date == null" type="button" class="btn btn-circle btn-info" 
                        (click)="gotitmodal(gotit,item.id,item2.id,item.subject,item.subjectdetail)" title="รับทราบ">
                        รับทราบ
                      </button>  

                      <button *ngIf="item2.beaware_date != null" type="button" class="btn btn-circle btn-warning" 
                        (click)="answerModal(AnswerRequestorder,item2.id)" title="รายงานผล">
                        รายงานผล
                      </button>  

                    </div>
                  </div>
                </div>
                 <!-- END สำหรับผู้รับคำร้องขอ -->

                           
                <div *ngIf="item.cancel == 1">
                  {{item.canceldetail == 'null' ? "-" : item.canceldetail}} 
                </div>
              </td>
              <td>
                <div *ngFor="let item2 of item.requestOrderAnswers;let m = index;">
                  <button *ngIf="item2.beaware_date != null" (click)="exportexecutive2(item2.id,item2.userID)" 
                    title="รายงานการดำเนินการตามคำร้องขอผู้บริหาร" class="btn btn-bitbucket btn-pill btn-sm">
                    <i class="align-middle fas fa-fw fa-download"></i> 
                  </button>
                  <hr *ngIf="item.requestOrderAnswers.length != (m+1) && role_id !=3"> <!-- เส้นขั้น --> 
                </div>          
              </td>
            </tr> 
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>

<!-- BEGIN เพิ่ม modal -->
<ng-template #CreateRequestOrder class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <form [formGroup]="Form" (ngSubmit)="storerequestorder(Form.value)">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">เพิ่มข้อมูล</h5>
        <button type="button" class="close" data-dismiss="modal" (click)="modalRef.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body m-3">
       
            <div class="form-group">
              <div class="mb-3">
                <input type="radio" name="Draft"  [value]="1" formControlName="Draft">
                <label style="margin-left: 10px;">ร่าง</label>
                <input style="margin-left: 10px;" type="radio" name="Draft"   [value]="0" formControlName="Draft">
                <label style="margin-left: 10px;">ใช้งานจริง</label>
              </div>
            </div>         
     
          <div class="form-group">
            <label class="form-label">วันที่มีคำร้องขอ*</label>
            <my-date-picker-th formControlName="Commanded_date"    [options]="myDatePickerOptions" 
              [(ngModel)]="date" required
              [ngClass]="{ 'is-invalid': submitted && f.Commanded_date.errors }">
            </my-date-picker-th>

            <div class="form-group" *ngIf="submitted &&  f.Commanded_date.errors"
              [ngStyle]="submitted &&  f.Commanded_date.invalid ? {color: '#dc3545'}:{color: ''} ">
              <div style="font-size: 80%;">กรุณาเลือกเวลา</div>
            </div>

          </div>

          <div class="form-group">
            <label class="form-label">ประเด็น/เรื่อง*</label>
            <input type="text" formControlName="Subject" class="form-control" placeholder="กรุณากรอกประเด็น/เรื่อง"
            [ngClass]="{ 'is-invalid': submitted && f.Subject.errors }">

            <div *ngIf="submitted && f.Subject.errors" class="invalid-feedback">
              <div *ngIf="f.Subject.errors.required">กรุณากรอกประเด็น/เรื่อง</div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">รายละเอียด</label>
            <textarea input type="text" formControlName="Subjectdetail" class="form-control" 
              placeholder="กรุณากรอกลายละเอียด" rows="5"
              [ngClass]="{ 'is-invalid': submitted && f.Subjectdetail.errors }">
            </textarea>  
              <div *ngIf="submitted && f.Subjectdetail.errors" class="invalid-feedback">
                <div *ngIf="f.Subjectdetail.errors.required">กรุณากรอกลายละเอียด</div>
              </div>       
          </div>

          <div class="form-group">
            <label>ผู้รับคำร้องขอ*</label>
            <ng-select bindLabel="label" bindValue="value" placeholder="กรุณาเลือกผู้รับคำร้องขอ" [multiple]="true" 
              [items]="selectdatauser" name="Answer_by" formControlName="Answer_by" 
              [ngClass]="{ 'is-invalid': submitted && f.Answer_by.errors }">
            </ng-select>
            <div *ngIf="submitted && f.Answer_by.errors" class="invalid-feedback">
              <div *ngIf="f.Answer_by.errors.required">กรุณาเลือกผู้รับข้อสั่งการ</div>
            </div>  
          </div>

        <div class="col-12 col-xl-12">
          <div class="form-group">
            <label class="form-label w-100">แนบไฟล์</label>
            <input type="file" (change)="uploadFile($event)" [multiple]="true">
            <small class="form-text text-muted">สำหรับแนบไฟล์ ฯลฯ.</small>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">บันทึก</button>
        <button type="button" class="btn btn-danger" (click)="modalRef.hide()" data-dismiss="modal">ปิด</button>
      </div>
    </div>
  </form>
  <!-- </div> -->
</ng-template>
<!-- END เพิ่ม modal -->

<!-- BEGIN แก้ไข modal -->
<ng-template #editRequestOrder class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <form [formGroup]="Form" (ngSubmit)="updaterequestorder(Form.value)">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">แก้ไขข้อมูล</h5>
        <button type="button" class="close" data-dismiss="modal" (click)="modalRef.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body m-3">
        <div class="form-group">

       
            <div class="form-group">
              <div class="mb-3">
                <input type="radio" name="Draft" [value]="1" formControlName="Draft">
                <label style="margin-left: 10px;">ร่าง</label>
                <input style="margin-left: 10px;" type="radio" name="Draft"  [value]="0" formControlName="Draft">
                <label style="margin-left: 10px;">ใช้งานจริง</label>
              </div>
            </div>         
     

          <div class="form-group">
            <label class="form-label">วันที่มีข้อสั่งการ*</label>
            <my-date-picker-th formControlName="Commanded_date" 
              [options]="myDatePickerOptions"  required
              [ngClass]="{ 'is-invalid': submitted && f.Commanded_date.errors }">
            </my-date-picker-th>
            <div class="form-group" *ngIf="submitted &&  f.Commanded_date.errors"
              [ngStyle]="submitted &&  f.Commanded_date.invalid ? {color: '#dc3545'}:{color: ''} ">
              <div style="font-size: 80%;">กรุณาเลือกเวลา</div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">ประเด็น/เรื่อง*</label>
            <input type="text" formControlName="Subject"  class="form-control" placeholder="กรุณากรอกประเด็น/เรื่อง"
            [ngClass]="{ 'is-invalid': submitted && f.Subject.errors }">

            <div *ngIf="submitted && f.Subject.errors" class="invalid-feedback">
              <div *ngIf="f.Subject.errors.required">กรุณากรอกประเด็น/เรื่อง</div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">รายละเอียด*</label>
            <textarea input type="text" formControlName="Subjectdetail" class="form-control" 
              placeholder="กรุณากรอกลายละเอียด" rows="5"
              [ngClass]="{ 'is-invalid': submitted && f.Subjectdetail.errors }">
            </textarea>  
              <div *ngIf="submitted && f.Subjectdetail.errors" class="invalid-feedback">
                <div *ngIf="f.Subjectdetail.errors.required">กรุณากรอกลายละเอียด</div>
              </div> 
          </div>

          <div class="form-group">
            <label>ผู้รับคำร้องขอ*</label>
            <ng-select bindLabel="label" bindValue="value" placeholder="กรุณาเลือกผู้รับคำร้องขอ" 
              [multiple]="true" [items]="selectdatauser"
              name="Answer_by" formControlName="Answer_by"  
              [ngClass]="{ 'is-invalid': submitted && f.Answer_by.errors }">
            </ng-select>
            <div *ngIf="submitted && f.Answer_by.errors" class="invalid-feedback">
              <div *ngIf="f.Answer_by.errors.required">กรุณาเลือกผู้รับข้อสั่งการ</div>
            </div>  
          </div>

        </div>
        <div class="col-12 col-xl-12">
          <div class="form-group">
            <label class="form-label w-100">แนบไฟล์</label>
            <a *ngFor="let item of requestfile let i = index" href="{{fileUrl}}/{{item.name}}" style="cursor: pointer;" download>
              <label class="badge badge-primary mr-1">{{i + 1}}. {{item.name}}</label>
              <br>
            </a>
            <input type="file" (change)="uploadFile($event)" [multiple]="true">
            <small class="form-text text-muted">สำหรับแนบไฟล์ ฯลฯ.</small>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">บันทึก</button>
        <button type="button" class="btn btn-danger" (click)="modalRef.hide()" data-dismiss="modal">ปิด</button>
      </div>
    </div>
  </form>
  <!-- </div> -->
</ng-template>
<!-- END แก้ไข modal -->

<!-- BEGIN primary modal -->
<ng-template #cancel class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <form [formGroup]="cancelForm" (ngSubmit)="cancelexecutiveorder(cancelForm.value)">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">ยกเลิกการแจ้งข้อมูลถึงผู้ตรวจราชการ</h5>
        <button type="button" class="close" data-dismiss="modal" (click)="modalRef.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body m-3">
        <div class="form-group">
          <label for="canceldetail" class="form-label">รายละเอียดการยกเลิก</label>
          <textarea input type="text" formControlName="canceldetail" class="form-control" 
            placeholder="กรุณากรอกรายละเอียดการยกเลิก" rows="5">
          </textarea>       
        </div>
      </div>

      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">ยืนยัน</button>
        <button type="button" class="btn btn-danger" (click)="modalRef.hide()" data-dismiss="modal">ปิด</button>
      </div>
    </div>
  </form>
  <!-- </div> -->
</ng-template>
<!-- END primary modal -->

<!--BEGIN รายละเอียด modal -->
<ng-template #DetailRequestorder class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- <form [formGroup]="detailForm"> -->
  <div class="modal-content">
    <div class="modal-header">
      <h4 class="modal-title">แจ้งข้อมูลถึงผู้ตรวจราชการ
      </h4>
      <button type="button" class="close" data-dismiss="modal" (click)="modalRef.hide()" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">

      <div *ngFor="let item3 of resultrequestorderdetail;let m = index;"> <!-- ข้อมูลหลัก -->
        <p><i class="align-middle mr-2 fas fa-question-circle"></i>
          <b style="font-size: 14px;">
            ประเด็น/เรื่อง: {{item3.subject}}
          </b>
        </p>

        <p>
          <i class="align-middle mr-2 fas fa-file"></i>
          <b class="font-size: 14px;">รายละเอียด: 
            {{item3.subjectdetail}}
          </b>
        </p>
        
        <p>
          <i class="align-middle mr-2 fas fa-calendar">
          </i><b class="font-size: 14px;"> วันที่มีการแจ้งข้อมูลถึงผู้ตรวจราชการ:</b>
          <span class="badge badge badge-info">{{item3.commanded_date | thaidate: 'year'}}</span>
        </p>

        <p>
          <i class="align-middle mr-2 fas fa-calendar"></i>
          <b class="font-size: 14px;"> วันที่สร้างการแจ้งข้อมูลถึงผู้ตรวจราชการ:
            <span class="badge badge badge-info">{{item3.createdAt | thaidate: 'year'}}</span>
          </b>
        </p>

        <p>
          <i class="align-middle mr-2 fas fa-fw fa-user-circle">
          </i><b class="font-size: 14px;">ผู้แจ้งข้อมูลถึงผู้ตรวจราชการ:
            <span class="badge badge-warning">{{item3.user.prefix}} {{item3.user.name}}</span>
          </b>
        </p>

        <p>
          <i class="align-middle mr-2 fas fa-fw fa-download">
          </i>ไฟล์แนบ :
          <a *ngFor="let item4 of  item3.requestOrderFiles let i = index" href="{{fileUrl}}/{{item4.name}}" download>
              <p>{{i + 1}}.{{item4.name}}</p>
          </a>
        </p>
        <hr>


        <h4 class="font-weight">การตอบกลับของผู้ตรวจราชการ</h4>
        <hr>
        <!-- ข้อมูลผู้รับ -->
        <div *ngFor="let item5 of item3.requestOrderAnswers;let m = index;">
          
          <div *ngFor="let item6 of item5.requestOrderAnswerDetails;let m = index;">

            <p><i class="align-middle mr-2 fas fa-fw fa-user-circle"></i>
              <b style="font-size: 14px"> ผู้รับเรื่อง: 
                <span class="badge badge-warning">{{item5.user.prefix}} {{item5.user.name}}</span>
              </b>
            </p>

            <p><i class="align-middle mr-2 fas fa-calendar"></i>
              <b style="font-size: 14px;">
                วันที่รายงาน :  <span class="badge badge badge-info">{{item6.commanded_date | thaidate: 'year'}}</span>
              </b>
            </p>

            <p><i class="align-middle mr-2 fas fa-info-circle"></i>
              <b style="font-size: 14px;">
                รายละเอียด : {{item6.answerdetail}}
              </b>
            </p>

            <p><i class="align-middle mr-2 fas fa-exclamation-triangle"></i>
              <b style="font-size: 14px;">
                ปัญหา/อุปสรรค : {{item6.answerProblem}}
              </b>
            </p>

            <p><i class="align-middle mr-2 fas fa-comments"></i>
              <b style="font-size: 14px">
                ข้อเสนอแนะ : {{item6.answerCounsel}}
              </b>
            </p>
          
            <label>
              <i class="align-middle mr-2 fas fa-fw fa-download"></i>ไฟล์แนบ :
              <a *ngFor="let item7 of item6.answerRequestOrderFiles let i = index" href="{{fileUrl}}/{{item7.name}}" download>
                  <p>{{i + 1}}.{{item7.name}}</p>
              </a>
            </label>
            <hr>
          </div>  
         
          <!-- END ข้อมูลผู้รับ -->
        </div>
      </div>

    </div>
  </div>
  <!-- </form> -->
  <!-- </div> -->
</ng-template>
<!-- END รายละเอียด modal -->

<!-- BEGIN got it modal -->
<ng-template #gotit class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <form [formGroup]="gotitForm" (ngSubmit)="gotitrequestorder()">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">รับทราบ</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="modalRef.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
         <b>เรื่อง :</b> {{vsubject}}
         <br><br>
         <b>ลายละเอียด :</b> {{vsubjectdetail}}
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">รับทราบ</button>
        <button type="button" class="btn btn-danger" (click)="modalRef.hide()" data-dismiss="modal">ปิด</button>
      </div>
    </div>
  </form>
  <!-- </div> -->
</ng-template>
<!-- END got it modal -->

<!-- END รายงาน modal -->
<ng-template #AnswerRequestorder class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <form [formGroup]="awnserForm" (ngSubmit)="storeanswerrequestorder(awnserForm.value)">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">บันทึกการดำเนินการตามข้อสั่งการ</h5>
        <button type="button" class="close" data-dismiss="modal" (click)="modalRef.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body m-3">

        <div class="form-group">
          <label for="answerdetail" class="form-label">รายละเอียด</label>
          <textarea input type="text"  formControlName="Answerdetail" class="form-control"
            placeholder="กรุณากรอกรายละเอียด" [ngClass]="{ 'is-invalid': submitted && g.Answerdetail.errors }">
          </textarea>
            <div *ngIf="submitted && g.Answerdetail.errors" class="invalid-feedback">
              <div *ngIf="g.Answerdetail.errors.required">กรุณากรอกลายละเอียด</div>
            </div>  
        </div>

        <div class="form-group">
          <label for="answerProblem" class="form-label">ปัญหา/อุปสรรค</label>
          <textarea input type="text"  formControlName="AnswerProblem" class="form-control"
            placeholder="กรุณากรอกปัญหา/อุปสรรค" [ngClass]="{ 'is-invalid': submitted && g.AnswerProblem.errors }">
          </textarea>
          <div *ngIf="submitted && g.AnswerProblem.errors" class="invalid-feedback">
            <div *ngIf="g.AnswerProblem.errors.required">กรุณากรอกปัญหา/อุปสรรค</div>
          </div> 
        </div>

        <div class="form-group">
          <label for="answerCounsel" class="form-label">ข้อเสนอแนะ</label>
          <textarea input type="text" formControlName="AnswerCounsel" class="form-control"
            placeholder="กรุณากรอกข้อเสนอแนะ" [ngClass]="{ 'is-invalid': submitted && g.AnswerCounsel.errors }">
          </textarea>
          <div *ngIf="submitted && g.AnswerCounsel.errors" class="invalid-feedback">
            <div *ngIf="g.AnswerCounsel.errors.required">กรุณากรอกข้อเสนอแนะ</div>
          </div> 
        </div>
 
          <div class="col-12 col-xl-12">
            <div class="form-group">
              <label class="form-label w-100">แนบไฟล์</label>
              <input type="file" multiple (change)="uploadFileanswer($event)">
              <small class="form-text text-muted">สำหรับแนบไฟล์ ฯลฯ.</small>
            </div>
          </div>
        
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">บันทึก</button>
        <button type="button" class="btn btn-danger" (click)="modalRef.hide()" data-dismiss="modal">ปิด</button>
      </div>
    </div>
  </form>
  <!-- </div> -->
</ng-template>
<!--BEGIN รายงาน modal -->

  <!-- BEGIN delte modal -->
  <ng-template #modaldelete class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-body text-center" style="background-color: white; border-radius: 5px;">
      <i class="fa fa-info-circle delete-icon"></i>
      <p style="font-size: xx-large; color: #565656; margin-top: 20px;">
        ลบข้อมูล
      </p>
      <p style="font-size: medium; color: #545454;">
        คุณต้องการลบข้อมูลนี้ใช่หรือไม่ ?
      </p>
      <button type="button" class="btn btn-primary btnMargin" (click)="deleterequestorder(delete_id)">
        ใช่
      </button>
      <button type="button" class="btn btn-danger btnMargin" (click)="modalRef.hide()">
        ไม่ใช่
      </button>
    </div>
  </ng-template>
  <!-- END delte modal -->

<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-spin-clockwise">
  <p style="font-size: 20px; color: white">Loading...</p>
</ngx-spinner>
